# é˜¶æ®µ1ï¼šé¡¹ç›®åˆå§‹åŒ–å’ŒåŸºç¡€æ¶æ„æ–½å·¥æŒ‡å—

## ğŸ“‹ é¢å‘å¯¹è±¡
**æœ¬æ–‡æ¡£é¢å‘ï¼šèœé¸Ÿçº§åˆ«çš„åˆçº§ç¨‹åºå‘˜**
- æ— éœ€æ·±åº¦æ€è€ƒï¼Œä¸¥æ ¼æŒ‰æ­¥éª¤æ‰§è¡Œ
- æ¯ä¸ªæ­¥éª¤éƒ½æœ‰æ˜ç¡®çš„æ–‡ä»¶æ“ä½œæŒ‡ä»¤
- åŒ…å«å¿…è¦çš„ä»£ç æ¨¡æ¿å’Œé…ç½®

## ğŸ¯ é˜¶æ®µç›®æ ‡
å»ºç«‹Open Claude Codeé¡¹ç›®çš„å®Œæ•´åŸºç¡€æ¶æ„ï¼Œå®ç°CLIå‘½ä»¤è¡Œæ¡†æ¶å’ŒåŸºç¡€ç»„ä»¶ç³»ç»Ÿã€‚

**é¢„æœŸäº¤ä»˜æˆæœ**ï¼š
- âœ… å®Œæ•´çš„Node.jsé¡¹ç›®ç»“æ„
- âœ… CLIå‘½ä»¤è¡Œç•Œé¢æ¡†æ¶
- âœ… åŸºç¡€UIç»„ä»¶ç³»ç»Ÿ(React/Ink)
- âœ… æ ¸å¿ƒé…ç½®ç®¡ç†ç³»ç»Ÿ
- âœ… åŸºç¡€æµ‹è¯•æ¡†æ¶

**å·¥ä½œæ—¶é—´**ï¼š4å‘¨ (160å·¥æ—¶)

---

## ğŸ“ ç¬¬ä¸€å‘¨ï¼šé¡¹ç›®æ¡†æ¶æ­å»º

### æ­¥éª¤1.1: ç¯å¢ƒå‡†å¤‡
**æ“ä½œæ¸…å•**ï¼š
```bash
# 1. æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version  # å¿…é¡» >= 18.0.0

# 2. å®‰è£…é¡¹ç›®ä¾èµ–ç®¡ç†å·¥å…·
npm install -g pnpm typescript tsx

# 3. åˆ›å»ºé¡¹ç›®æ ¹ç›®å½•
mkdir open-claude-code
cd open-claude-code
git init
```

### æ­¥éª¤1.2: åˆ›å»ºé¡¹ç›®æ–‡ä»¶ç»“æ„
**å¾…åˆ›å»ºçš„å®Œæ•´æ–‡ä»¶æ ‘**ï¼š
```
open-claude-code/
â”œâ”€â”€ package.json                 # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json               # TypeScripté…ç½®
â”œâ”€â”€ .eslintrc.js               # ä»£ç è§„èŒƒ
â”œâ”€â”€ .prettierrc                # ä»£ç æ ¼å¼åŒ–
â”œâ”€â”€ jest.config.js             # æµ‹è¯•é…ç½®
â”œâ”€â”€ .gitignore                 # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ src/                       # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ cli.ts                 # CLIå…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ types/                 # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ index.ts           # å¯¼å‡ºæ‰€æœ‰ç±»å‹
â”‚   â”‚   â”œâ”€â”€ agent.ts           # Agentç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ tool.ts            # å·¥å…·ç›¸å…³ç±»å‹
â”‚   â”‚   â””â”€â”€ config.ts          # é…ç½®ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ core/                  # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ index.ts           # æ ¸å¿ƒæ¨¡å—å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ agent-core.ts      # Agentæ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ message-queue.ts   # h2Aå¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—
â”‚   â”‚   â””â”€â”€ config-manager.ts  # é…ç½®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ ui/                    # ç”¨æˆ·ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ index.ts           # UIæ¨¡å—å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ app.tsx            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/        # UIç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.tsx       # å¯¹è¯ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ status.tsx     # çŠ¶æ€æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ progress.tsx   # è¿›åº¦æ¡ç»„ä»¶
â”‚   â”‚   â””â”€â”€ hooks/             # React Hooks
â”‚   â”‚       â”œâ”€â”€ use-chat.ts    # å¯¹è¯çŠ¶æ€ç®¡ç†
â”‚   â”‚       â””â”€â”€ use-agent.ts   # AgentçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ tools/                 # å·¥å…·ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ index.ts           # å·¥å…·ç³»ç»Ÿå¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ base.ts            # å·¥å…·åŸºç±»
â”‚   â”‚   â”œâ”€â”€ registry.ts        # å·¥å…·æ³¨å†Œè¡¨
â”‚   â”‚   â””â”€â”€ implementations/   # å…·ä½“å·¥å…·å®ç°
â”‚   â”‚       â”œâ”€â”€ read.ts        # Readå·¥å…·
â”‚   â”‚       â”œâ”€â”€ write.ts       # Writeå·¥å…·
â”‚   â”‚       â””â”€â”€ bash.ts        # Bashå·¥å…·
â”‚   â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ default.ts         # é»˜è®¤é…ç½®
â”‚   â”‚   â””â”€â”€ schema.ts          # é…ç½®æ¨¡å¼éªŒè¯
â”‚   â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ index.ts           # å·¥å…·å‡½æ•°å¯¼å‡º
â”‚       â”œâ”€â”€ logger.ts          # æ—¥å¿—ç³»ç»Ÿ
â”‚       â””â”€â”€ helpers.ts         # è¾…åŠ©å‡½æ•°
â”œâ”€â”€ tests/                     # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                  # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/           # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ fixtures/              # æµ‹è¯•æ•°æ®
â”œâ”€â”€ docs/                      # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ API.md                 # APIæ–‡æ¡£
â”‚   â””â”€â”€ CONTRIBUTING.md        # è´¡çŒ®æŒ‡å—
â””â”€â”€ scripts/                   # æ„å»ºè„šæœ¬
    â”œâ”€â”€ build.js               # æ„å»ºè„šæœ¬
    â””â”€â”€ test.js                # æµ‹è¯•è„šæœ¬
```

**æ‰§è¡ŒæŒ‡ä»¤**ï¼š
```bash
# åˆ›å»ºæ‰€æœ‰ç›®å½•ç»“æ„
mkdir -p src/{types,core,ui/{components,hooks},tools/implementations,config,utils}
mkdir -p tests/{unit,integration,fixtures}
mkdir -p docs scripts
```

### æ­¥éª¤1.3: åˆ›å»ºpackage.jsoné…ç½®æ–‡ä»¶
**æ–‡ä»¶è·¯å¾„**: `package.json`
**æ–‡ä»¶å†…å®¹**:
```json
{
  "name": "open-claude-code",
  "version": "1.0.0-alpha.1",
  "description": "Open source AI programming assistant based on Claude Code reverse engineering",
  "main": "dist/cli.js",
  "bin": {
    "claude": "./dist/cli.js"
  },
  "scripts": {
    "build": "tsc && chmod +x dist/cli.js",
    "dev": "tsx src/cli.ts",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "lint": "eslint src --ext .ts,.tsx",
    "lint:fix": "eslint src --ext .ts,.tsx --fix",
    "format": "prettier --write src",
    "type-check": "tsc --noEmit",
    "start": "node dist/cli.js"
  },
  "engines": {
    "node": ">=18.0.0"
  },
  "keywords": ["ai", "programming", "assistant", "cli", "claude", "anthropic"],
  "author": "Open Claude Code Contributors",
  "license": "MIT",
  "dependencies": {
    "commander": "^11.1.0",
    "ink": "^4.4.1",
    "react": "^18.2.0",
    "anthropic": "^0.20.0",
    "openai": "^4.28.0",
    "ws": "^8.16.0",
    "node-fetch": "^3.3.2",
    "chalk": "^5.3.0",
    "ora": "^7.0.1",
    "inquirer": "^9.2.12",
    "zod": "^3.22.4",
    "uuid": "^9.0.1",
    "dotenv": "^16.4.1"
  },
  "devDependencies": {
    "@types/node": "^20.11.0",
    "@types/react": "^18.2.0",
    "@types/ws": "^8.5.10",
    "@types/inquirer": "^9.0.7",
    "@types/uuid": "^9.0.7",
    "@types/jest": "^29.5.12",
    "typescript": "^5.3.3",
    "tsx": "^4.7.0",
    "jest": "^29.7.0",
    "ts-jest": "^29.1.1",
    "eslint": "^8.56.0",
    "@typescript-eslint/eslint-plugin": "^6.19.1",
    "@typescript-eslint/parser": "^6.19.1",
    "prettier": "^3.2.4"
  }
}
```

### æ­¥éª¤1.4: åˆ›å»ºTypeScripté…ç½®æ–‡ä»¶
**æ–‡ä»¶è·¯å¾„**: `tsconfig.json`
**æ–‡ä»¶å†…å®¹**:
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2022"],
    "module": "CommonJS",
    "moduleResolution": "node",
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "jsx": "react",
    "declaration": true,
    "outDir": "./dist",
    "rootDir": "./src",
    "removeComments": true,
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "noImplicitReturns": true,
    "noImplicitThis": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "exactOptionalPropertyTypes": true,
    "resolveJsonModule": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@/types": ["src/types"],
      "@/core": ["src/core"],
      "@/ui": ["src/ui"],
      "@/tools": ["src/tools"],
      "@/utils": ["src/utils"],
      "@/config": ["src/config"]
    }
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "node_modules",
    "dist",
    "tests"
  ]
}
```

### æ­¥éª¤1.5: åˆ›å»ºä»£ç è§„èŒƒé…ç½®
**æ–‡ä»¶è·¯å¾„**: `.eslintrc.js`
**æ–‡ä»¶å†…å®¹**:
```javascript
module.exports = {
  parser: '@typescript-eslint/parser',
  extends: [
    'eslint:recommended',
    '@typescript-eslint/recommended',
  ],
  plugins: ['@typescript-eslint'],
  parserOptions: {
    ecmaVersion: 2022,
    sourceType: 'module',
    ecmaFeatures: {
      jsx: true,
    },
  },
  rules: {
    '@typescript-eslint/no-unused-vars': 'error',
    '@typescript-eslint/no-explicit-any': 'warn',
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-empty-function': 'off',
    'prefer-const': 'error',
    'no-var': 'error',
  },
  env: {
    node: true,
    es6: true,
    jest: true,
  },
};
```

**æ–‡ä»¶è·¯å¾„**: `.prettierrc`
**æ–‡ä»¶å†…å®¹**:
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false
}
```

---

## ğŸ“ ç¬¬äºŒå‘¨ï¼šæ ¸å¿ƒç±»å‹ç³»ç»Ÿè®¾è®¡

### æ­¥éª¤2.1: åˆ›å»ºåŸºç¡€ç±»å‹å®šä¹‰
**æ–‡ä»¶è·¯å¾„**: `src/types/index.ts`
**æ–‡ä»¶å†…å®¹**:
```typescript
// å¯¼å‡ºæ‰€æœ‰ç±»å‹å®šä¹‰
export * from './agent';
export * from './tool';
export * from './config';
export * from './message';
export * from './ui';
```

### æ­¥éª¤2.2: åˆ›å»ºAgentç›¸å…³ç±»å‹
**æ–‡ä»¶è·¯å¾„**: `src/types/agent.ts`
**æ–‡ä»¶å†…å®¹**:
```typescript
/**
 * Agentæ ¸å¿ƒç±»å‹å®šä¹‰
 * åŸºäºé€†å‘åˆ†æçš„nOå‡½æ•°å’Œh2Aå¼‚æ­¥é˜Ÿåˆ—æœºåˆ¶è®¾è®¡
 */

// Agentæ‰§è¡ŒçŠ¶æ€
export type AgentStatus = 
  | 'idle'           // ç©ºé—²çŠ¶æ€
  | 'thinking'       // æ€è€ƒä¸­
  | 'tool_calling'   // å·¥å…·è°ƒç”¨ä¸­
  | 'streaming'      // æµå¼è¾“å‡ºä¸­
  | 'waiting_input'  // ç­‰å¾…ç”¨æˆ·è¾“å…¥
  | 'error'          // é”™è¯¯çŠ¶æ€
  | 'aborted';       // å·²ä¸­æ­¢

// æ¶ˆæ¯ç±»å‹å®šä¹‰(åŸºäºé€†å‘åˆ†æçš„æ¶ˆæ¯ç»“æ„)
export interface Message {
  id: string;
  role: 'user' | 'assistant' | 'system' | 'tool';
  content: string;
  timestamp: number;
  metadata?: {
    toolCalls?: ToolCall[];
    toolResults?: ToolResult[];
    steeringMessage?: boolean;  // å®æ—¶Steeringæ¶ˆæ¯æ ‡è®°
  };
}

// Agenté…ç½®æ¥å£
export interface AgentConfig {
  model: string;
  fallbackModel?: string;
  maxTokens?: number;
  temperature?: number;
  enableSteering: boolean;      // å®æ—¶Steeringå¼€å…³
  concurrencyLimit: number;     // åŸºäºgW5æœºåˆ¶çš„å¹¶å‘æ§åˆ¶
  allowedTools?: string[];
  disallowedTools?: string[];
  planMode?: boolean;           // Planæ¨¡å¼å¼€å…³
}

// Agentä¸Šä¸‹æ–‡ä¿¡æ¯
export interface AgentContext {
  sessionId: string;
  workingDirectory: string;
  environment: Record<string, string>;
  fileStates: Record<string, FileState>;  // readFileStateè¿½è¸ª
  memoryContext?: string;
  parentAgent?: string;         // å¤šAgentæ¶æ„æ”¯æŒ
}

// æ–‡ä»¶çŠ¶æ€è¿½è¸ª(åŸºäºEditå·¥å…·å¼ºåˆ¶è¯»å–æœºåˆ¶)
export interface FileState {
  path: string;
  lastRead: number;            // æ—¶é—´æˆ³
  lastModified: number;
  contentHash: string;
  isRead: boolean;             // æ˜¯å¦å·²è¯»å–
}

// Agentæ‰§è¡Œç»“æœ
export interface AgentResult {
  success: boolean;
  message?: string;
  data?: any;
  toolResults?: ToolResult[];
  error?: Error;
}
```

### æ­¥éª¤2.3: åˆ›å»ºå·¥å…·ç³»ç»Ÿç±»å‹
**æ–‡ä»¶è·¯å¾„**: `src/types/tool.ts`
**æ–‡ä»¶å†…å®¹**:
```typescript
/**
 * å·¥å…·ç³»ç»Ÿç±»å‹å®šä¹‰
 * åŸºäºé€†å‘åˆ†æçš„MH1å·¥å…·å¼•æ“è®¾è®¡
 */

// å·¥å…·åŸºç¡€æ¥å£
export interface Tool {
  name: string;
  description: string;
  schema: ToolSchema;
  execute: ToolExecutor;
  category: ToolCategory;
  requiresFileRead?: boolean;   // æ˜¯å¦éœ€è¦å¼ºåˆ¶è¯»å–æ£€æŸ¥
  subAgentCapable?: boolean;    // æ˜¯å¦æ”¯æŒSubAgent(å¦‚Taskå·¥å…·)
}

// å·¥å…·åˆ†ç±»
export type ToolCategory = 
  | 'file'        // æ–‡ä»¶æ“ä½œ
  | 'system'      // ç³»ç»Ÿæ“ä½œ 
  | 'network'     // ç½‘ç»œæ“ä½œ
  | 'task'        // ä»»åŠ¡ç®¡ç†
  | 'special';    // ç‰¹æ®Šå·¥å…·

// å·¥å…·å‚æ•°æ¨¡å¼
export interface ToolSchema {
  type: 'object';
  properties: Record<string, any>;
  required: string[];
  additionalProperties: boolean;
}

// å·¥å…·æ‰§è¡Œå™¨æ¥å£
export type ToolExecutor = (
  params: any,
  context: ToolExecutionContext
) => Promise<ToolResult> | AsyncGenerator<ToolResult>;

// å·¥å…·æ‰§è¡Œä¸Šä¸‹æ–‡
export interface ToolExecutionContext {
  sessionId: string;
  workingDirectory: string;
  fileStates: Record<string, FileState>;
  permissions: ToolPermissions;
  abortSignal?: AbortSignal;
  steeringQueue?: h2AQueue;     // å®æ—¶Steeringé˜Ÿåˆ—å¼•ç”¨
}

// å·¥å…·æƒé™æ§åˆ¶
export interface ToolPermissions {
  allowFileWrite: boolean;
  allowFileRead: boolean;
  allowBashExecution: boolean;
  allowNetworkAccess: boolean;
  restrictedPaths: string[];
}

// å·¥å…·è°ƒç”¨ä¿¡æ¯
export interface ToolCall {
  id: string;
  name: string;
  parameters: any;
  timestamp: number;
}

// å·¥å…·æ‰§è¡Œç»“æœ
export interface ToolResult {
  toolCallId: string;
  success: boolean;
  data?: any;
  error?: string;
  duration: number;
  subAgentResult?: AgentResult; // SubAgentæ‰§è¡Œç»“æœ
}

// h2Aå¼‚æ­¥é˜Ÿåˆ—æ¥å£(å®æ—¶Steeringæ ¸å¿ƒæœºåˆ¶)
export interface h2AQueue {
  push(message: SteeringMessage): void;
  next(): Promise<{ value: SteeringMessage | null; done: boolean }>;
  abort(): void;
  isAborted: boolean;
}

// å®æ—¶Steeringæ¶ˆæ¯
export interface SteeringMessage {
  type: 'user_input' | 'abort' | 'adjust_strategy';
  content: string;
  timestamp: number;
  priority: number;
}
```

### æ­¥éª¤2.4: åˆ›å»ºé…ç½®ç³»ç»Ÿç±»å‹
**æ–‡ä»¶è·¯å¾„**: `src/types/config.ts`
**æ–‡ä»¶å†…å®¹**:
```typescript
/**
 * é…ç½®ç³»ç»Ÿç±»å‹å®šä¹‰
 * æ”¯æŒåˆ†å±‚é…ç½®ç®¡ç†å’ŒMCPé›†æˆ
 */

// ä¸»é…ç½®æ¥å£
export interface OpenClaudeConfig {
  // æ ¸å¿ƒé…ç½®
  core: CoreConfig;
  // UIé…ç½®
  ui: UIConfig;
  // Agenté…ç½®
  agent: AgentConfig;
  // å·¥å…·é…ç½®
  tools: ToolsConfig;
  // MCPé…ç½®
  mcp: MCPConfig;
  // æ—¥å¿—é…ç½®
  logging: LoggingConfig;
}

// æ ¸å¿ƒé…ç½®
export interface CoreConfig {
  apiKey?: string;
  apiBaseUrl?: string;
  model: string;
  fallbackModel?: string;
  maxRetries: number;
  timeout: number;
  workingDirectory: string;
}

// UIé…ç½®
export interface UIConfig {
  theme: 'light' | 'dark' | 'auto';
  showProgress: boolean;
  enableAnimations: boolean;
  compactMode: boolean;
}

// å·¥å…·é…ç½®
export interface ToolsConfig {
  enabled: string[];
  disabled: string[];
  permissions: ToolPermissions;
  concurrency: {
    maxConcurrent: number;        // åŸºäºgW5æœºåˆ¶
    enableLoadBalancing: boolean; // åŠ¨æ€è´Ÿè½½å‡è¡¡
  };
}

// MCPé…ç½®(åŸºäºé€†å‘åˆ†æçš„MCPæœºåˆ¶)
export interface MCPConfig {
  servers: Record<string, MCPServerConfig>;
  globalTimeout: number;
  retryAttempts: number;
}

export interface MCPServerConfig {
  command: string;
  args: string[];
  transport: 'stdio' | 'http' | 'websocket';
  timeout?: number;
  env?: Record<string, string>;
  workingDirectory?: string;
  oauth?: OAuth2Config;
}

export interface OAuth2Config {
  clientId: string;
  clientSecret: string;
  authUrl: string;
  tokenUrl: string;
  scopes: string[];
}

// æ—¥å¿—é…ç½®
export interface LoggingConfig {
  level: 'debug' | 'info' | 'warn' | 'error';
  file?: string;
  maxFileSize: number;
  maxFiles: number;
}

// é…ç½®éªŒè¯é”™è¯¯
export class ConfigValidationError extends Error {
  constructor(
    message: string,
    public path: string,
    public value: any
  ) {
    super(message);
    this.name = 'ConfigValidationError';
  }
}
```

---

## ğŸ“ ç¬¬ä¸‰å‘¨ï¼šCLIæ¡†æ¶å’ŒUIç³»ç»Ÿ

### æ­¥éª¤3.1: åˆ›å»ºCLIå…¥å£æ–‡ä»¶
**æ–‡ä»¶è·¯å¾„**: `src/cli.ts`
**æ–‡ä»¶å†…å®¹**:
```typescript
#!/usr/bin/env node

/**
 * Open Claude Code CLIå…¥å£
 * åŸºäºé€†å‘åˆ†æçš„CLIæ¶æ„è®¾è®¡
 */

import { Command } from 'commander';
import { render } from 'ink';
import React from 'react';
import { App } from './ui/app';
import { ConfigManager } from './core/config-manager';
import { Logger } from './utils/logger';

const program = new Command();

// CLIç‰ˆæœ¬å’ŒåŸºæœ¬ä¿¡æ¯
program
  .name('claude')
  .description('Open source AI programming assistant')
  .version('1.0.0-alpha.1');

// ä¸»è¦å‘½ä»¤å®šä¹‰(åŸºäºé€†å‘åˆ†æçš„CLIå‘½ä»¤ç»“æ„)
program
  .argument('[prompt]', 'Initial prompt to send to Claude')
  .option('-m, --model <model>', 'Model to use (claude-3-5-sonnet, gpt-4)', 'claude-3-5-sonnet')
  .option('--fallback-model <model>', 'Fallback model if primary fails')
  .option('-c, --continue <session>', 'Continue previous session')
  .option('-r, --resume <session>', 'Resume session from history')
  .option('-p, --print', 'Print mode - non-interactive output')
  .option('-d, --debug', 'Enable debug logging')
  .option('--allowed-tools <tools>', 'Comma-separated list of allowed tools')
  .option('--disallowed-tools <tools>', 'Comma-separated list of disallowed tools')
  .option('--plan-mode', 'Start in plan mode (analysis only)')
  .option('--disable-steering', 'Disable real-time steering mechanism')
  .action(async (prompt, options) => {
    try {
      // åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨
      const configManager = new ConfigManager();
      await configManager.initialize();
      
      // åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿ
      const logger = new Logger(options.debug ? 'debug' : 'info');
      
      // è§£æå·¥å…·æƒé™
      const allowedTools = options.allowedTools?.split(',').map((s: string) => s.trim());
      const disallowedTools = options.disallowedTools?.split(',').map((s: string) => s.trim());
      
      // æ„å»ºåº”ç”¨é…ç½®
      const appConfig = {
        initialPrompt: prompt,
        model: options.model,
        fallbackModel: options.fallbackModel,
        sessionId: options.continue || options.resume,
        printMode: options.print,
        planMode: options.planMode,
        enableSteering: !options.disableSteering,
        allowedTools,
        disallowedTools,
        debug: options.debug,
      };
      
      if (options.print && prompt) {
        // éäº¤äº’å¼æ¨¡å¼ - ç›´æ¥è¾“å‡ºç»“æœ
        const { AgentCore } = await import('./core/agent-core');
        const agent = new AgentCore(appConfig, configManager, logger);
        const result = await agent.executePrompt(prompt);
        console.log(result);
        process.exit(0);
      } else {
        // äº¤äº’å¼æ¨¡å¼ - å¯åŠ¨React/Ink UI
        const { unmount } = render(
          React.createElement(App, { 
            config: appConfig, 
            configManager, 
            logger 
          })
        );
        
        // ä¼˜é›…é€€å‡ºå¤„ç†
        process.on('SIGINT', () => {
          unmount();
          process.exit(0);
        });
        
        process.on('SIGTERM', () => {
          unmount();
          process.exit(0);
        });
      }
    } catch (error) {
      console.error('Failed to start Claude Code:', error);
      process.exit(1);
    }
  });

// è§£æå‘½ä»¤è¡Œå‚æ•°
program.parse();
```

### æ­¥éª¤3.2: åˆ›å»ºä¸»UIåº”ç”¨ç»„ä»¶
**æ–‡ä»¶è·¯å¾„**: `src/ui/app.tsx`
**æ–‡ä»¶å†…å®¹**:
```typescript
/**
 * ä¸»åº”ç”¨UIç»„ä»¶
 * åŸºäºé€†å‘åˆ†æçš„React/Inkæ¶æ„è®¾è®¡
 */

import React, { useState, useEffect } from 'react';
import { Box, Text, useInput } from 'ink';
import { ChatComponent } from './components/chat';
import { StatusComponent } from './components/status';
import { ProgressComponent } from './components/progress';
import { useAgent } from './hooks/use-agent';
import { useChat } from './hooks/use-chat';
import type { ConfigManager } from '../core/config-manager';
import type { Logger } from '../utils/logger';

interface AppProps {
  config: any;
  configManager: ConfigManager;
  logger: Logger;
}

export const App: React.FC<AppProps> = ({ config, configManager, logger }) => {
  // AgentçŠ¶æ€ç®¡ç†
  const { 
    agent, 
    status, 
    error, 
    initialize, 
    executePrompt, 
    abort 
  } = useAgent(config, configManager, logger);
  
  // å¯¹è¯çŠ¶æ€ç®¡ç†
  const {
    messages,
    addMessage,
    clearMessages
  } = useChat();
  
  // UIçŠ¶æ€
  const [currentMode, setCurrentMode] = useState<'default' | 'plan' | 'bash' | 'note'>('default');
  const [inputBuffer, setInputBuffer] = useState('');
  const [isMultilineInput, setIsMultilineInput] = useState(false);
  
  // åˆå§‹åŒ–Agent
  useEffect(() => {
    initialize();
    
    // å¤„ç†åˆå§‹æç¤º
    if (config.initialPrompt) {
      addMessage({
        id: Date.now().toString(),
        role: 'user',
        content: config.initialPrompt,
        timestamp: Date.now()
      });
      executePrompt(config.initialPrompt);
    }
  }, []);
  
  // é”®ç›˜è¾“å…¥å¤„ç†(åŸºäºé€†å‘åˆ†æçš„äº¤äº’æ¨¡å¼)
  useInput((input, key) => {
    // Shift+Tab æ¨¡å¼åˆ‡æ¢(åŸºäºé€†å‘åˆ†æçš„Planæ¨¡å¼æœºåˆ¶)
    if (key.shift && key.tab) {
      const modes = ['default', 'plan', 'bash', 'note'] as const;
      const currentIndex = modes.indexOf(currentMode);
      const nextMode = modes[(currentIndex + 1) % modes.length];
      setCurrentMode(nextMode);
      return;
    }
    
    // Ctrl+C ä¸­æ­¢æ‰§è¡Œ
    if (key.ctrl && input === 'c') {
      abort();
      return;
    }
    
    // Ctrl+L æ¸…é™¤å¯¹è¯
    if (key.ctrl && input === 'l') {
      clearMessages();
      return;
    }
    
    // Enter å‘é€æ¶ˆæ¯
    if (key.return) {
      if (inputBuffer.trim()) {
        handleUserInput(inputBuffer.trim());
        setInputBuffer('');
      }
      return;
    }
    
    // æ™®é€šå­—ç¬¦è¾“å…¥
    if (!key.ctrl && !key.meta) {
      setInputBuffer(prev => prev + input);
    }
    
    // Backspace åˆ é™¤å­—ç¬¦
    if (key.backspace || key.delete) {
      setInputBuffer(prev => prev.slice(0, -1));
    }
  });
  
  // å¤„ç†ç”¨æˆ·è¾“å…¥(åŸºäºé€†å‘åˆ†æçš„äº¤äº’æ¨¡å¼æœºåˆ¶)
  const handleUserInput = async (input: string) => {
    // æ£€æŸ¥ç‰¹æ®Šæ¨¡å¼å‰ç¼€
    if (input.startsWith('!')) {
      // Bashæ‰§è¡Œæ¨¡å¼
      const command = input.slice(1).trim();
      await handleBashCommand(command);
      return;
    }
    
    if (input.startsWith('#')) {
      // ç¬”è®°è®°å½•æ¨¡å¼
      const note = input.slice(1).trim();
      await handleNoteCommand(note);
      return;
    }
    
    if (input.startsWith('/')) {
      // æ–œæ å‘½ä»¤å¤„ç†
      await handleSlashCommand(input);
      return;
    }
    
    // æ™®é€šå¯¹è¯æ¶ˆæ¯
    const message = {
      id: Date.now().toString(),
      role: 'user' as const,
      content: input,
      timestamp: Date.now()
    };
    
    addMessage(message);
    await executePrompt(input);
  };
  
  // Bashå‘½ä»¤å¤„ç†
  const handleBashCommand = async (command: string) => {
    addMessage({
      id: Date.now().toString(),
      role: 'user',
      content: `!${command}`,
      timestamp: Date.now()
    });
    
    // ç›´æ¥è°ƒç”¨Bashå·¥å…·
    await executePrompt(`æ‰§è¡Œå‘½ä»¤: ${command}`, { 
      forceToolUse: 'bash',
      toolParams: { command }
    });
  };
  
  // ç¬”è®°å‘½ä»¤å¤„ç†  
  const handleNoteCommand = async (note: string) => {
    addMessage({
      id: Date.now().toString(),
      role: 'user',
      content: `#${note}`,
      timestamp: Date.now()
    });
    
    // è®°å½•åˆ°ç¬”è®°ç³»ç»Ÿ
    await executePrompt(`è®°å½•ç¬”è®°: ${note}`, {
      forceToolUse: 'todo_write',
      isNote: true
    });
  };
  
  // æ–œæ å‘½ä»¤å¤„ç†
  const handleSlashCommand = async (command: string) => {
    const [cmd, ...args] = command.slice(1).split(' ');
    
    switch (cmd) {
      case 'help':
        showHelpMessage();
        break;
      case 'clear':
        clearMessages();
        break;
      case 'login':
        await handleLoginCommand();
        break;
      case 'logout':
        await handleLogoutCommand();
        break;
      case 'mcp':
        await handleMCPCommand(args);
        break;
      case 'status':
        showStatusMessage();
        break;
      default:
        addMessage({
          id: Date.now().toString(),
          role: 'system',
          content: `æœªçŸ¥å‘½ä»¤: ${cmd}ã€‚è¾“å…¥ /help æŸ¥çœ‹å¯ç”¨å‘½ä»¤ã€‚`,
          timestamp: Date.now()
        });
    }
  };
  
  // å¸®åŠ©ä¿¡æ¯æ˜¾ç¤º
  const showHelpMessage = () => {
    addMessage({
      id: Date.now().toString(),
      role: 'system',
      content: `å¯ç”¨å‘½ä»¤ï¼š
/help - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
/clear - æ¸…é™¤å¯¹è¯å†å²
/login - ç”¨æˆ·ç™»å½•
/logout - ç”¨æˆ·æ³¨é”€
/mcp - MCPæœåŠ¡å™¨ç®¡ç†
/status - æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€

ç‰¹æ®Šæ¨¡å¼ï¼š
! <å‘½ä»¤> - ç›´æ¥æ‰§è¡ŒBashå‘½ä»¤
# <ç¬”è®°> - è®°å½•ç¬”è®°
Shift+Tab - åˆ‡æ¢æ¨¡å¼ (default/plan/bash/note)
Ctrl+C - ä¸­æ­¢æ‰§è¡Œ
Ctrl+L - æ¸…é™¤å¯¹è¯`,
      timestamp: Date.now()
    });
  };
  
  // çŠ¶æ€ä¿¡æ¯æ˜¾ç¤º
  const showStatusMessage = () => {
    addMessage({
      id: Date.now().toString(),
      role: 'system',
      content: `ç³»ç»ŸçŠ¶æ€ï¼š
AgentçŠ¶æ€: ${status}
å½“å‰æ¨¡å¼: ${currentMode}
å®æ—¶Steering: ${config.enableSteering ? 'å¯ç”¨' : 'ç¦ç”¨'}
Planæ¨¡å¼: ${config.planMode ? 'å¯ç”¨' : 'ç¦ç”¨'}
å½“å‰æ¨¡å‹: ${config.model}`,
      timestamp: Date.now()
    });
  };
  
  // ç™»å½•å¤„ç†
  const handleLoginCommand = async () => {
    // TODO: å®ç°OAuthç™»å½•æµç¨‹
    addMessage({
      id: Date.now().toString(),
      role: 'system',
      content: 'ç™»å½•åŠŸèƒ½å°†åœ¨åç»­ç‰ˆæœ¬å®ç°',
      timestamp: Date.now()
    });
  };
  
  // æ³¨é”€å¤„ç†
  const handleLogoutCommand = async () => {
    // TODO: å®ç°æ³¨é”€é€»è¾‘
    addMessage({
      id: Date.now().toString(),
      role: 'system',
      content: 'æ³¨é”€åŠŸèƒ½å°†åœ¨åç»­ç‰ˆæœ¬å®ç°',
      timestamp: Date.now()
    });
  };
  
  // MCPå‘½ä»¤å¤„ç†
  const handleMCPCommand = async (args: string[]) => {
    // TODO: å®ç°MCPç®¡ç†é€»è¾‘
    addMessage({
      id: Date.now().toString(),
      role: 'system',
      content: 'MCPç®¡ç†åŠŸèƒ½å°†åœ¨åç»­ç‰ˆæœ¬å®ç°',
      timestamp: Date.now()
    });
  };
  
  return (
    <Box flexDirection="column" height="100%">
      {/* æ ‡é¢˜æ  */}
      <Box borderStyle="single" paddingX={1}>
        <Text bold color="blue">
          Open Claude Code v1.0.0-alpha.1
        </Text>
        <Text> - æ¨¡å¼: {currentMode}</Text>
        {config.planMode && (
          <Text color="yellow"> [PLAN MODE - ä»…åˆ†æä¸æ‰§è¡Œ]</Text>
        )}
      </Box>
      
      {/* çŠ¶æ€æ  */}
      <StatusComponent 
        status={status}
        model={config.model}
        enableSteering={config.enableSteering}
      />
      
      {/* ä¸»è¦å†…å®¹åŒºåŸŸ */}
      <Box flex={1} flexDirection="column">
        {/* å¯¹è¯åŒºåŸŸ */}
        <Box flex={1}>
          <ChatComponent 
            messages={messages}
            status={status}
          />
        </Box>
        
        {/* è¿›åº¦åŒºåŸŸ */}
        {status === 'tool_calling' || status === 'streaming' ? (
          <ProgressComponent 
            status={status}
          />
        ) : null}
      </Box>
      
      {/* è¾“å…¥åŒºåŸŸ */}
      <Box borderStyle="single" paddingX={1}>
        <Text>
          [{currentMode}] > {inputBuffer}
          <Text backgroundColor="white" color="black">â–ˆ</Text>
        </Text>
      </Box>
      
      {/* é”™è¯¯æ˜¾ç¤º */}
      {error && (
        <Box borderStyle="single" borderColor="red" paddingX={1}>
          <Text color="red">é”™è¯¯: {error.message}</Text>
        </Box>
      )}
      
      {/* å¸®åŠ©æç¤º */}
      <Box paddingX={1}>
        <Text dimColor>
          Shift+Tab: åˆ‡æ¢æ¨¡å¼ | Ctrl+C: ä¸­æ­¢ | Ctrl+L: æ¸…ç©º | /help: å¸®åŠ©
        </Text>
      </Box>
    </Box>
  );
};
```

---

## ğŸ“ ç¬¬å››å‘¨ï¼šåŸºç¡€é…ç½®å’Œæ„å»ºç³»ç»Ÿ

### æ­¥éª¤4.1: åˆ›å»ºé…ç½®ç®¡ç†å™¨
**æ–‡ä»¶è·¯å¾„**: `src/core/config-manager.ts`
**æ–‡ä»¶å†…å®¹**:
```typescript
/**
 * é…ç½®ç®¡ç†å™¨
 * æ”¯æŒåˆ†å±‚é…ç½®å’Œè¿è¡Œæ—¶æ›´æ–°
 */

import fs from 'fs/promises';
import path from 'path';
import { z } from 'zod';
import type { OpenClaudeConfig } from '../types/config';

// é…ç½®éªŒè¯æ¨¡å¼
const ConfigSchema = z.object({
  core: z.object({
    apiKey: z.string().optional(),
    apiBaseUrl: z.string().optional(),
    model: z.string().default('claude-3-5-sonnet'),
    fallbackModel: z.string().optional(),
    maxRetries: z.number().default(3),
    timeout: z.number().default(30000),
    workingDirectory: z.string().default(process.cwd()),
  }),
  ui: z.object({
    theme: z.enum(['light', 'dark', 'auto']).default('auto'),
    showProgress: z.boolean().default(true),
    enableAnimations: z.boolean().default(true),
    compactMode: z.boolean().default(false),
  }),
  agent: z.object({
    model: z.string().default('claude-3-5-sonnet'),
    fallbackModel: z.string().optional(),
    maxTokens: z.number().optional(),
    temperature: z.number().default(0.7),
    enableSteering: z.boolean().default(true),
    concurrencyLimit: z.number().default(10),
    allowedTools: z.array(z.string()).optional(),
    disallowedTools: z.array(z.string()).optional(),
    planMode: z.boolean().default(false),
  }),
  tools: z.object({
    enabled: z.array(z.string()).default([]),
    disabled: z.array(z.string()).default([]),
    permissions: z.object({
      allowFileWrite: z.boolean().default(true),
      allowFileRead: z.boolean().default(true),
      allowBashExecution: z.boolean().default(true),
      allowNetworkAccess: z.boolean().default(true),
      restrictedPaths: z.array(z.string()).default([]),
    }),
    concurrency: z.object({
      maxConcurrent: z.number().default(10),
      enableLoadBalancing: z.boolean().default(true),
    }),
  }),
  mcp: z.object({
    servers: z.record(z.object({
      command: z.string(),
      args: z.array(z.string()).default([]),
      transport: z.enum(['stdio', 'http', 'websocket']).default('stdio'),
      timeout: z.number().optional(),
      env: z.record(z.string()).optional(),
      workingDirectory: z.string().optional(),
      oauth: z.object({
        clientId: z.string(),
        clientSecret: z.string(),
        authUrl: z.string(),
        tokenUrl: z.string(),
        scopes: z.array(z.string()).default([]),
      }).optional(),
    })).default({}),
    globalTimeout: z.number().default(30000),
    retryAttempts: z.number().default(3),
  }),
  logging: z.object({
    level: z.enum(['debug', 'info', 'warn', 'error']).default('info'),
    file: z.string().optional(),
    maxFileSize: z.number().default(10 * 1024 * 1024), // 10MB
    maxFiles: z.number().default(5),
  }),
});

export class ConfigManager {
  private config: OpenClaudeConfig;
  private configPaths: string[];
  
  constructor() {
    // é…ç½®æ–‡ä»¶æŸ¥æ‰¾è·¯å¾„(åˆ†å±‚é…ç½®æ”¯æŒ)
    this.configPaths = [
      path.join(process.cwd(), '.claude.json'),     // é¡¹ç›®çº§é…ç½®
      path.join(process.cwd(), '.claude.config.js'), // é¡¹ç›®çº§JSé…ç½®
      path.join(os.homedir(), '.claude', 'config.json'), // ç”¨æˆ·çº§é…ç½®
      '/etc/claude/config.json',                    // ç³»ç»Ÿçº§é…ç½®
    ];
    
    // é»˜è®¤é…ç½®
    this.config = ConfigSchema.parse({});
  }
  
  async initialize(): Promise<void> {
    // æŒ‰ä¼˜å…ˆçº§åŠ è½½é…ç½®æ–‡ä»¶
    for (const configPath of this.configPaths) {
      try {
        await this.loadConfigFile(configPath);
      } catch (error) {
        // é…ç½®æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ ¼å¼é”™è¯¯ï¼Œç»§ç»­å°è¯•ä¸‹ä¸€ä¸ª
        continue;
      }
    }
    
    // åŠ è½½ç¯å¢ƒå˜é‡é…ç½®
    this.loadEnvironmentConfig();
    
    // éªŒè¯æœ€ç»ˆé…ç½®
    this.validateConfig();
  }
  
  private async loadConfigFile(configPath: string): Promise<void> {
    try {
      const content = await fs.readFile(configPath, 'utf-8');
      let configData: any;
      
      if (configPath.endsWith('.js')) {
        // åŠ¨æ€å¯¼å…¥JSé…ç½®æ–‡ä»¶
        const module = await import(configPath);
        configData = module.default || module;
      } else {
        // è§£æJSONé…ç½®æ–‡ä»¶
        configData = JSON.parse(content);
      }
      
      // æ·±åº¦åˆå¹¶é…ç½®
      this.config = this.deepMerge(this.config, configData);
    } catch (error) {
      throw new Error(`Failed to load config from ${configPath}: ${error}`);
    }
  }
  
  private loadEnvironmentConfig(): void {
    // ä»ç¯å¢ƒå˜é‡åŠ è½½é…ç½®
    const envConfig: any = {};
    
    // APIé…ç½®
    if (process.env.ANTHROPIC_API_KEY) {
      envConfig.core = { 
        ...envConfig.core, 
        apiKey: process.env.ANTHROPIC_API_KEY 
      };
    }
    
    if (process.env.CLAUDE_MODEL) {
      enconfig.agent = { 
        ...envConfig.agent, 
        model: process.env.CLAUDE_MODEL 
      };
    }
    
    if (process.env.CLAUDE_DEBUG) {
      envConfig.logging = { 
        ...envConfig.logging, 
        level: 'debug' 
      };
    }
    
    // åˆå¹¶ç¯å¢ƒå˜é‡é…ç½®
    if (Object.keys(envConfig).length > 0) {
      this.config = this.deepMerge(this.config, envConfig);
    }
  }
  
  private validateConfig(): void {
    try {
      this.config = ConfigSchema.parse(this.config);
    } catch (error) {
      throw new Error(`Configuration validation failed: ${error}`);
    }
  }
  
  private deepMerge(target: any, source: any): any {
    const result = { ...target };
    
    for (const key in source) {
      if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {
        result[key] = this.deepMerge(result[key] || {}, source[key]);
      } else {
        result[key] = source[key];
      }
    }
    
    return result;
  }
  
  // è·å–é…ç½®
  getConfig(): OpenClaudeConfig {
    return { ...this.config };
  }
  
  // è·å–ç‰¹å®šé…ç½®èŠ‚
  getSection<K extends keyof OpenClaudeConfig>(section: K): OpenClaudeConfig[K] {
    return { ...this.config[section] };
  }
  
  // æ›´æ–°é…ç½®
  updateConfig(updates: Partial<OpenClaudeConfig>): void {
    this.config = this.deepMerge(this.config, updates);
    this.validateConfig();
  }
  
  // ä¿å­˜é…ç½®åˆ°æ–‡ä»¶
  async saveConfig(configPath?: string): Promise<void> {
    const targetPath = configPath || this.configPaths[0];
    const configJson = JSON.stringify(this.config, null, 2);
    
    // ç¡®ä¿ç›®å½•å­˜åœ¨
    await fs.mkdir(path.dirname(targetPath), { recursive: true });
    
    // å†™å…¥é…ç½®æ–‡ä»¶
    await fs.writeFile(targetPath, configJson, 'utf-8');
  }
}
```

### æ­¥éª¤4.2: åˆ›å»ºæµ‹è¯•é…ç½®
**æ–‡ä»¶è·¯å¾„**: `jest.config.js`
**æ–‡ä»¶å†…å®¹**:
```javascript
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  roots: ['<rootDir>/src', '<rootDir>/tests'],
  testMatch: [
    '**/__tests__/**/*.ts',
    '**/?(*.)+(spec|test).ts'
  ],
  transform: {
    '^.+\\.ts$': 'ts-jest',
  },
  collectCoverageFrom: [
    'src/**/*.ts',
    '!src/**/*.d.ts',
    '!src/cli.ts',
  ],
  coverageDirectory: 'coverage',
  coverageReporters: ['text', 'lcov', 'html'],
  moduleNameMapping: {
    '^@/(.*)$': '<rootDir>/src/$1',
  },
  setupFilesAfterEnv: ['<rootDir>/tests/setup.ts'],
};
```

### æ­¥éª¤4.3: åˆ›å»ºGitå¿½ç•¥æ–‡ä»¶
**æ–‡ä»¶è·¯å¾„**: `.gitignore`
**æ–‡ä»¶å†…å®¹**:
```
# ä¾èµ–ç›®å½•
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# æ„å»ºè¾“å‡º
dist/
build/
*.tsbuildinfo

# æµ‹è¯•è¦†ç›–ç‡
coverage/
.nyc_output/

# è¿è¡Œæ—¶æ–‡ä»¶
*.log
*.pid
*.seed
*.pid.lock

# ç¯å¢ƒå˜é‡
.env
.env.local
.env.*.local

# IDEé…ç½®
.vscode/
.idea/
*.swp
*.swo

# æ“ä½œç³»ç»Ÿæ–‡ä»¶
.DS_Store
Thumbs.db

# é…ç½®æ–‡ä»¶
.claude.json
.claude.config.js

# ä¸´æ—¶æ–‡ä»¶
*.tmp
*.temp
.cache/
```

---

## âœ… é˜¶æ®µ1éªŒæ”¶æ£€æŸ¥æ¸…å•

### ç¯å¢ƒéªŒè¯
- [ ] Node.jsç‰ˆæœ¬ >= 18.0.0
- [ ] TypeScriptç¼–è¯‘æˆåŠŸ
- [ ] æ‰€æœ‰ä¾èµ–å®‰è£…å®Œæˆ
- [ ] ESLintæ£€æŸ¥é€šè¿‡
- [ ] Jestæµ‹è¯•æ¡†æ¶è¿è¡Œæ­£å¸¸

### æ–‡ä»¶ç»“æ„éªŒè¯
- [ ] æ‰€æœ‰ç›®å½•æŒ‰è§„èŒƒåˆ›å»º
- [ ] ç±»å‹å®šä¹‰æ–‡ä»¶å®Œæ•´
- [ ] CLIå…¥å£æ–‡ä»¶å¯æ‰§è¡Œ
- [ ] é…ç½®ç®¡ç†å™¨å·¥ä½œæ­£å¸¸
- [ ] UIæ¡†æ¶åŸºç¡€æ­å»ºå®Œæˆ

### åŠŸèƒ½éªŒè¯
- [ ] `npm run build` ç¼–è¯‘æˆåŠŸ
- [ ] `npm run dev` å¼€å‘æ¨¡å¼å¯åŠ¨
- [ ] `npm run test` æµ‹è¯•è¿è¡Œ
- [ ] `npm run lint` ä»£ç æ£€æŸ¥é€šè¿‡
- [ ] CLIå‘½ä»¤ `claude --help` æ˜¾ç¤ºæ­£å¸¸

### ä»£ç è´¨é‡éªŒè¯
- [ ] TypeScriptç±»å‹å®šä¹‰å®Œæ•´
- [ ] ä»£ç ç¬¦åˆESLintè§„èŒƒ
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 60%
- [ ] æ‰€æœ‰æ–‡ä»¶éƒ½æœ‰é€‚å½“çš„æ³¨é‡Š
- [ ] é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„

---

## ğŸš€ å®Œæˆé˜¶æ®µ1åçš„ä¸‹ä¸€æ­¥

å®Œæˆé˜¶æ®µ1åï¼Œæ‚¨å°†æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®åŸºç¡€æ¶æ„ã€‚æ¥ä¸‹æ¥åº”è¯¥ï¼š

1. **éªŒæ”¶æµ‹è¯•**: ç¡®ä¿æ‰€æœ‰æ£€æŸ¥é¡¹ç›®éƒ½å·²é€šè¿‡
2. **æ–‡æ¡£æ›´æ–°**: å®Œå–„README.mdå’ŒAPIæ–‡æ¡£
3. **ä»£ç å®¡æŸ¥**: æ£€æŸ¥ä»£ç è´¨é‡å’Œè§„èŒƒæ€§
4. **è¿›å…¥é˜¶æ®µ2**: å¼€å§‹å·¥å…·ç³»ç»Ÿå’ŒAgentæ ¸å¿ƒçš„å¼€å‘

**é¢„æœŸç»“æœ**: ä¸€ä¸ªå¯ä»¥å¯åŠ¨ã€å…·å¤‡åŸºç¡€CLIå’ŒUIæ¡†æ¶çš„é¡¹ç›®éª¨æ¶ï¼Œä¸ºåç»­å¼€å‘æ‰“ä¸‹åšå®åŸºç¡€ã€‚

---

*åŸºäºClaude Codeé€†å‘åˆ†æçš„ç²¾ç¡®æŠ€æœ¯æŒ‡å¯¼ï¼Œç¡®ä¿æ¯ä¸ªå®ç°ç»†èŠ‚éƒ½ç¬¦åˆåŸç‰ˆæ¶æ„è®¾è®¡ã€‚*